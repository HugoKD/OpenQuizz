{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>OpenQuizz - UserHome</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'quizz/css/interfaceUser.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/717f408a62.js" crossorigin="anonymous"></script>
</head>
<body>
    {% include 'OpenQuizz/navbar.html' %}
    {% block content %}
    {% endblock %}

    <div class="main">

        <h1>-{{ question }}-</h1>

        <img src="{% static "quizz/img/adrien.jpg" %}" alt="image_quizz">
        <div class="timer"><h2>{{ timer }}</h2></div>
        <div class="questions">
            <div class="bloc">
                <button type="submit"><h2>{{ reponse1 }}</h2></button>{% csrf_token %}
                <button type="submit"><h2>{{ reponse2 }}</h2></button>{% csrf_token %}
            </div>
            <div class="bloc">
                <button class="question_bas" type="submit"><h2>{{ reponse3 }}</h2></button>{% csrf_token %}
                <button class="question_bas" type="submit"><h2>{{ reponse4 }}</h2></button>{% csrf_token %}
            </div>
        </div>

        <div class="id_quizz"><h3>{{ id_quizz }}</h3></div>{% csrf_token %}
        <div class="num_question"><h3>{{ num_question }}</h3></div>{% csrf_token %}

        <script>
            const id_quizz = document.querySelector(".id_quizz")
            let num_question = document.querySelector(".num_question")
            const timerElement = document.querySelector(".timer h2")
            let i =0
            while (true) { //seul moyen que j'ai trouvé pour convertire num_question.innerText en  number pouvant etre incrémenté
                if (num_question.innerText == i) {
                    console.log('ok')
                    break
                }else {
                    console.log('non ok')
                    i++
                }
            }
            let time = timerElement.innerText
            function diminuerTemps() {
                time--
                var str;
                if (time < 0) {
                    str = "http://127.0.0.1:8000/interfaceUser/id="+id_quizz.innerText+"/num_question="+(i+1)
                    document.location.href = str;
                }
                timerElement.innerText = time

            }

            setInterval(diminuerTemps, 1000)

        </script>



    </div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
</body>
</html>